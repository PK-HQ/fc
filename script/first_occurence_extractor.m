fpath='/Users/pk/Desktop/FC/data/';
subjfile='FC_cfs_sub14_20160912_1256';
filename=[fpath subjfile '.csv'];
savefilename=[fpath subjfile '_clean.csv'];
Results=csvread(filename,1);

unique_combis=[1000,1001,1010,1011,1100,1101,1110,1111,2000,2001,2010,2011,2100,2101,2110,2111,3000,3001,3010,3011,3100,3101,3110,3111,4000,4001,4010,4011,4100,4101,4110,4111,5000,5001,5010,5011,5100,5101,5110,5111,6000,6001,6010,6011,6100,6101,6110,6111,7000,7001,7010,7011,7100,7101,7110,7111,8000,8001,8010,8011,8100,8101,8110,8111,9000,9001,9010,9011,9100,9101,9110,9111,10000,10001,10010,10011,10100,10101,10110,10111,11000,11001,11010,11011,11100,11101,11110,11111,12000,12001,12010,12011,12100,12101,12110,12111,13000,13001,13010,13011,13100,13101,13110,13111,14000,14001,14010,14011,14100,14101,14110,14111,15000,15001,15010,15011,15100,15101,15110,15111,16000,16001,16010,16011,16100,16101,16110,16111,17000,17001,17010,17011,17100,17101,17110,17111,18000,18001,18010,18011,18100,18101,18110,18111,19000,19001,19010,19011,19100,19101,19110,19111,20000,20001,20010,20011,20100,20101,20110,20111,21000,21001,21010,21011,21100,21101,21110,21111,22000,22001,22010,22011,22100,22101,22110,22111,23000,23001,23010,23011,23100,23101,23110,23111,24000,24001,24010,24011,24100,24101,24110,24111,25000,25001,25010,25011,25100,25101,25110,25111,26000,26001,26010,26011,26100,26101,26110,26111,27000,27001,27010,27011,27100,27101,27110,27111,28000,28001,28010,28011,28100,28101,28110,28111,29000,29001,29010,29011,29100,29101,29110,29111,30000,30001,30010,30011,30100,30101,30110,30111];

%concatenate sentenceID+condition binaries, e.g. 2300/1
for i=1:400,
Results(i,16)=str2num(sprintf('%-1d',[Results(i,7),Results(i,9),Results(i,10),Results(i,11)]));
end

%find first instance of sentenceID+conditions, e.g. when Sentence 23, 0 1 1 first appears
indexes=[];
for i=unique_combis,
idx=find(Results(1:400,16)==i,1);
indexes=[indexes;idx];
end

%Tag first instance trials
Results(:,17)=zeros(400,1);
for i=indexes,
Results(i,17)=1;
end
Results_clean=Results((Results(:,17)==1),:);

fid =   fopen(savefilename, 'w');
fprintf(fid, 'subID,domEyeR,threshStHi,threshStLo,thresh,Trial_number,Sentence_ID,Sentence_pixel_length,Congruent_1,Familiar_1,LocationTop_1,Cued_1,Trialcorrect_1,Trialbroken_1,ST\n');
fclose(fid);
dlmwrite(savefilename,Results_clean(:,1:15),'-append');